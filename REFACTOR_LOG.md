# OmniAlpha é‡æ„è®¡åˆ’ä¸å˜æ›´æ—¥å¿—

æœ¬æ–‡æ¡£ç”¨äºè®°å½•å°† **OmniAlpha** ä» Streamlit å•ä½“åº”ç”¨é‡æ„ä¸º **FastAPI (åç«¯) + React (å‰ç«¯)** åˆ†ç¦»æ¶æ„çš„å…¨è¿‡ç¨‹ã€‚

## 1. é‡æ„ç›®æ ‡ (Objectives)

*   **è§£è€¦**: å°†æ•°æ®å¤„ç†/ç­–ç•¥è®¡ç®—é€»è¾‘ä¸ç•Œé¢å±•ç¤ºé€»è¾‘å®Œå…¨åˆ†ç¦»ã€‚
*   **æ€§èƒ½**: æå‡å¤§æ•°æ®é‡ä¸‹çš„å“åº”é€Ÿåº¦ï¼Œæ¶ˆé™¤ Streamlit æ¯æ¬¡äº¤äº’é‡è·‘è„šæœ¬çš„æ€§èƒ½ç“¶é¢ˆã€‚
*   **ä½“éªŒ**: ä½¿ç”¨ç°ä»£ Web æŠ€æœ¯ (React + Tailwind) æ„å»ºæ›´ä¸“ä¸šã€äº¤äº’æ›´æµç•…çš„é‡åŒ–å·¥ä½œå°ã€‚
*   **æ‰©å±•**: ä¸ºæœªæ¥å¼•å…¥æ›´å¤æ‚çš„äº¤äº’ï¼ˆå¦‚æ‹–æ‹½å¼ç­–ç•¥æ„å»ºã€å®æ—¶è¡Œæƒ…æ¨é€ï¼‰æ‰“ä¸‹åŸºç¡€ã€‚

## 2. æŠ€æœ¯æ ˆ (Tech Stack)

| æ¨¡å— | åŸæœ‰æŠ€æœ¯ | **æ–°æŠ€æœ¯** | è¯´æ˜ |
| :--- | :--- | :--- | :--- |
| **åç«¯** | Python / Streamlit | **Python / FastAPI** | é«˜æ€§èƒ½å¼‚æ­¥ Web æ¡†æ¶ï¼Œè‡ªåŠ¨ç”Ÿæˆ OpenAPI æ–‡æ¡£ |
| **å‰ç«¯** | Streamlit UI | **React (Vite + TS)** | å·¥ä¸šçº§å‰ç«¯æ¡†æ¶ï¼Œä½¿ç”¨ TypeScript ä¿è¯ç±»å‹å®‰å…¨ |
| **æ ·å¼** | Streamlit Native | **Tailwind CSS** | åŸå­åŒ– CSS æ¡†æ¶ï¼Œå¿«é€Ÿæ„å»ºç°ä»£ UI |
| **ç»„ä»¶åº“** | Streamlit Widgets | **shadcn/ui** (æ¨è) | åŸºäº Radix UI çš„é«˜è´¨é‡ç»„ä»¶åº“ |
| **å›¾è¡¨** | Altair | **Recharts / Lightweight Charts** | æ›´é€‚åˆé‡‘èæ•°æ®çš„äº¤äº’å¼å›¾è¡¨åº“ |

---

## 3. å®æ–½è·¯çº¿å›¾ (Roadmap)

### ç¬¬ä¸€é˜¶æ®µï¼šé¡¹ç›®ç»“æ„é‡ç»„ä¸åç«¯åŸºç¡€ (Infrastructure & Backend)
- [x] **1.1 ç›®å½•ç»“æ„è°ƒæ•´**: å»ºç«‹ `backend/` å’Œ `frontend/` ç›®å½•ã€‚(æ ¹ç›®å½•æ¸…ç†æš‚ç¼“)
- [x] **1.2 FastAPI åˆå§‹åŒ–**: é…ç½® `main.py`ï¼Œè®¾ç½® CORSï¼Œé…ç½® Uvicorn æœåŠ¡å™¨ã€‚
- [x] **1.3 æ ¸å¿ƒæ¥å£è¿ç§» - åŸºç¡€**: 
    - [x] ç§»æ¤å¤§ç›˜æ•°æ®è·å– (`/api/market/index`)
    - [x] ç§»æ¤ç­–ç•¥åˆ—è¡¨è·å– (`/api/strategies`)
- [x] **1.4 æ ¸å¿ƒæ¥å£è¿ç§» - æ‰«æ**:
    - [x] å®ç°è‚¡ç¥¨æ‰«ææ¥å£ (`/api/scan`)ï¼Œå¤„ç†é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ (ä½¿ç”¨ StreamingResponse NDJSON)ã€‚
- [x] **1.5 æ ¸å¿ƒæ¥å£è¿ç§» - ä¸ªè‚¡**:
    - [x] å®ç°ä¸ªè‚¡ K çº¿ä¸æŒ‡æ ‡æ•°æ®æ¥å£ (`/api/stock/{code}`)ã€‚

### ç¬¬äºŒé˜¶æ®µï¼šå‰ç«¯å·¥ç¨‹æ­å»º (Frontend Setup)
- [x] **2.1 Vite é¡¹ç›®åˆå§‹åŒ–**: åˆ›å»º React + TypeScript é¡¹ç›®ã€‚
  - åˆ›å»º `vite.config.ts`, `tsconfig.json`, `index.html` ç­‰åŸºç¡€é…ç½®æ–‡ä»¶ã€‚
  - åˆå§‹åŒ– React å…¥å£æ–‡ä»¶ `src/main.tsx` å’Œæ ¹ç»„ä»¶ `src/App.tsx`ã€‚
- [x] **2.2 æ ·å¼é…ç½®**: å®‰è£…å¹¶é…ç½® Tailwind CSSã€‚
  - åˆ›å»º `tailwind.config.js` å’Œ `postcss.config.js`ã€‚
  - åœ¨ `src/index.css` ä¸­å¼•å…¥ Tailwind æŒ‡ä»¤ã€‚
- [x] **2.3 åŸºç¡€å¸ƒå±€å¼€å‘**: å¼€å‘ä¾§è¾¹æ ã€é¡¶éƒ¨å¯¼èˆªã€ä¸»å†…å®¹åŒºåŸŸçš„ Layout éª¨æ¶ã€‚
  - å®ç° `Sidebar` ç»„ä»¶ï¼šåŒ…å«å¯¼èˆªèœå•å’Œç”¨æˆ·ä¿¡æ¯ã€‚
  - å®ç° `Header` ç»„ä»¶ï¼šåŒ…å«æœç´¢æ¡†å’Œé€šçŸ¥å›¾æ ‡ã€‚
  - å®ç° `Layout` å®¹å™¨ç»„ä»¶ï¼šæ•´åˆ Sidebar å’Œ Headerã€‚
  - æ›´æ–° `App.tsx` ä½¿ç”¨ Layout å¸ƒå±€ã€‚
- [x] **2.4 API å®¢æˆ·ç«¯å°è£…**: å°è£… `axios` æˆ– `fetch` è¯·æ±‚ï¼Œç»Ÿä¸€ç®¡ç†åç«¯æ¥å£è°ƒç”¨ã€‚
  - åˆ›å»º `src/api/client.ts`ï¼šé…ç½® baseURLã€è¶…æ—¶æ—¶é—´åŠè¯·æ±‚/å“åº”æ‹¦æˆªå™¨ã€‚

### ç¬¬ä¸‰é˜¶æ®µï¼šåŠŸèƒ½æ¨¡å—å®ç° (Feature Implementation)
**æ–°å¯¼èˆªæ¶æ„**: é¦–é¡µ / æŠ€æœ¯é€‰è‚¡ / Alpha é€‰è‚¡ / AI é€‰è‚¡

- [x] **3.1 å¯¼èˆªä¸è·¯ç”±é‡æ„**:
    - [x] ä¿®æ”¹ `Sidebar` ç»„ä»¶ï¼Œæ›´æ–°ä¸ºæ–°çš„å››å¤§æ¨¡å—èœå•ã€‚
    - [x] é…ç½® React Router è·¯ç”±ç»“æ„ã€‚
    - [x] åˆ›å»ºé¡µé¢å ä½ç»„ä»¶: `Home`, `Technical`, `Alpha`, `AI`ã€‚

- [x] **3.2 æŠ€æœ¯é€‰è‚¡æ¨¡å— (Technical Selection)**:
    - *å¯¹åº”åç«¯ `strategies/` (è§„åˆ™ç±»ç­–ç•¥)*
    - [x] ç­–ç•¥é…ç½®é¢æ¿: å¤åˆ»åŸ Streamlit ä¾§è¾¹æ ï¼Œæ”¯æŒå¤šç­–ç•¥ç»„åˆã€‚
    - [x] æ‰«æä»»åŠ¡æµ: è§¦å‘ `/api/scan`ï¼Œå±•ç¤ºæµå¼è¿›åº¦ã€‚
    - [x] ç»“æœè¡¨æ ¼: å®ç°æ’åºã€ç­›é€‰ã€åˆ†é¡µã€‚

- [x] **3.3 Alpha é€‰è‚¡æ¨¡å— (Alpha Selection)**:
    - *å¯¹åº”åç«¯ `alpha/` (é‡åŒ–å› å­)*
    - [x] å› å­åº“å±•ç¤º: å±•ç¤ºå¯ç”¨å› å­åˆ—è¡¨ (å¦‚ GTJA 191)ã€‚
    - [x] å› å­è®¡ç®—å™¨: é€‰æ‹©å› å­è®¡ç®—å¾—åˆ†å¹¶æ’åºã€‚
    - [ ] åˆ†å¸ƒå¯è§†åŒ–: ä½¿ç”¨ Recharts å±•ç¤ºå› å­åœ¨å…¨å¸‚åœºçš„åˆ†å¸ƒ (ç›´æ–¹å›¾/çƒ­åŠ›å›¾) [åç»­è¿­ä»£]ã€‚

- [x] **3.4 AI é€‰è‚¡æ¨¡å— (AI Selection)**:
    - *å¯¹åº”åç«¯ `llm/` (å¤§æ¨¡å‹äº¤äº’)*
    - [x] è‡ªç„¶è¯­è¨€è¾“å…¥æ¡†: "å¸®æˆ‘æ‰¾ä¸€ä¸‹æœ€è¿‘ç¼©é‡ä¸‹è·Œçš„è‚¡ç¥¨"ã€‚
    - [x] ç­–ç•¥ç”Ÿæˆå™¨: è°ƒç”¨ LLM ç”Ÿæˆä»£ç æˆ–å‚æ•°é…ç½® (Mockå®ç°)ã€‚

- [x] **3.5 è‚¡ç¥¨è¯¦æƒ…é¡µ (Stock Detail)**:
    - [x] å…¬å…±æ¨¡å—ï¼Œä»ä¸Šè¿°ä»»ä¸€é€‰è‚¡ç»“æœç‚¹å‡»è¿›å…¥ã€‚
    - [x] K çº¿å›¾ç»„ä»¶ (Lightweight Charts/SVG)ã€‚
    - [ ] è¯¦ç»†æŒ‡æ ‡çœ‹æ¿ [åç»­è¿­ä»£]ã€‚

### ç¬¬å››é˜¶æ®µï¼šæ”¶å°¾ä¸éƒ¨ç½² (Finalization)
- [x] **4.1 æ¸…ç†**: ç§»é™¤ `web_ui.py` åŠç›¸å…³ Streamlit ä¾èµ– (å·²æ ‡è®°åºŸå¼ƒ)ã€‚
- [x] **4.2 æ–‡æ¡£**: æ›´æ–° README.mdï¼Œè¡¥å……å¯åŠ¨æŒ‡å—ã€‚
- [ ] **4.3 æµ‹è¯•**: å®Œæ•´æµç¨‹æµ‹è¯•ã€‚

---

## 4. å˜æ›´æ—¥å¿— (Change Log)

*è®°å½•æ¯æ¬¡é‡å¤§çš„ä»£ç å˜æ›´ä¸è¿›åº¦æ›´æ–°*

| æ—¥æœŸ | ç±»åˆ« | ä¿®æ”¹å†…å®¹ | çŠ¶æ€ |
| :--- | :--- | :--- | :--- |
| 2026-01-14 | **Plan** | åˆ›å»ºé‡æ„è®¡åˆ’æ–‡æ¡£ `REFACTOR_LOG.md` | âœ… å®Œæˆ |
| 2026-01-14 | **Init** | åˆ›å»ºåç«¯ç›®å½•ç»“æ„ä¸ FastAPI åŸºç¡€é…ç½® | âœ… å®Œæˆ |
| 2026-01-14 | **Feat** | å®ç° `/api/market/index` æ¥å£ | âœ… å®Œæˆ |
| 2026-01-14 | **Feat** | å®ç° `/api/strategies` æ¥å£ | âœ… å®Œæˆ |
| 2026-01-14 | **Feat** | å®ç° `/api/scan` æ¥å£ (Streamæµå¼å“åº”) | âœ… å®Œæˆ |
| 2026-01-14 | **Feat** | å®ç° `/api/stock/{code}` æ¥å£ (å«æŒ‡æ ‡è®¡ç®—) | âœ… å®Œæˆ |
| 2026-01-14 | **Feat** | åˆå§‹åŒ–å‰ç«¯ React é¡¹ç›®ï¼Œå®ŒæˆåŸºç¡€å¸ƒå±€ä¸ API å°è£… | âœ… å®Œæˆ |
| 2026-01-14 | **Refactor** | é‡æ„å‰ç«¯å¯¼èˆªï¼Œå®ç° é¦–é¡µ/æŠ€æœ¯/Alpha/AI å››å¤§æ¨¡å—è·¯ç”± | âœ… å®Œæˆ |
| 2026-01-14 | **Feat** | å®ç° Alpha æ¨¡å—åç«¯ API (`/api/alpha`)ï¼Œæ”¯æŒå› å­åˆ—è¡¨è·å–ä¸å•å› å­è®¡ç®— | âœ… å®Œæˆ |
| 2026-01-14 | **Feat** | å®ç° Alpha æ¨¡å—å‰ç«¯ç•Œé¢ (`src/pages/Alpha.tsx`)ï¼Œå«å› å­åˆ—è¡¨ã€è®¡ç®—æ§åˆ¶åŠ SVG å¯è§†åŒ– | âœ… å®Œæˆ |
| 2026-01-14 | **Feat** | å®ç° AI æ¨¡å—åç«¯ API (`/api/ai`)ï¼Œæä¾›æµå¼å¯¹è¯æ¥å£ (Mock LLM) | âœ… å®Œæˆ |
| 2026-01-14 | **Feat** | å®ç° AI æ¨¡å—å‰ç«¯ç•Œé¢ (`src/pages/AI.tsx`)ï¼Œæ”¯æŒæµå¼å“åº”æ˜¾ç¤º | âœ… å®Œæˆ |
| 2026-01-14 | **Feat** | å®ç° Home ä»ªè¡¨ç›˜ (`src/pages/Home.tsx`)ï¼Œæ¥å…¥ `/api/market/index` å±•ç¤ºå¤§ç›˜æŒ‡æ•° | âœ… å®Œæˆ |
| 2026-01-14 | **Feat** | å®ç°è‚¡ç¥¨è¯¦æƒ…é¡µ (`src/pages/StockDetail.tsx`)ï¼Œå« K çº¿å›¾ç»˜åˆ¶ä¸åŸºæœ¬æŒ‡æ ‡å±•ç¤º | âœ… å®Œæˆ |
| 2026-01-14 | **Refactor** | å®Œå–„ Technical æ¨¡å—ï¼Œå¢åŠ è¯¦æƒ…é¡µè·³è½¬ï¼›æ ‡è®°æ—§æ¶æ„æ–‡ä»¶ä¸ºåºŸå¼ƒ | âœ… å®Œæˆ |
| 2026-01-14 | **Docs** | æ›´æ–° README.mdï¼Œè¡¥å……æ–°æ¶æ„å¯åŠ¨æŒ‡å— | âœ… å®Œæˆ |
| 2026-01-14 | **Feat** | å®ç° Technical æ¨¡å—å‰ç«¯ç•Œé¢ (è¡¥å½•) | âœ… å®Œæˆ |
| 2026-01-14 | **Milestone**| **æ ¸å¿ƒæ¶æ„é‡æ„ (Streamlit -> FastAPI+React) å®Œæˆ** | ğŸ† é‡Œç¨‹ç¢‘ |