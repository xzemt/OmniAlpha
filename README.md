# OmniAlpha: å…¨åœºæ™¯æ™ºèƒ½é‡åŒ–ç ”ç©¶ä¸äº¤æ˜“å¼•æ“

**OmniAlpha** æ˜¯ä¸€ä¸ªä¸“ä¸º A è‚¡å¸‚åœºè®¾è®¡çš„æ¨¡å—åŒ–é‡åŒ–äº¤æ˜“å¹³å°ã€‚å®ƒä¸ä»…é›†æˆäº†å®æ—¶è¡Œæƒ…è·å–ã€å†å²å›æµ‹å’Œæ¨¡æ‹Ÿç›˜æ‰§è¡Œï¼Œæ›´æ ¸å¿ƒçš„çªç ´åœ¨äºå…¶**åŒå¾ªç¯æ¶æ„**ï¼šå†…ç½®åŸºäºé—ä¼ ç®—æ³•ä¸å¼ºåŒ–å­¦ä¹ çš„ **AlphaGen å› å­æŒ–æ˜å·¥å‚**ï¼Œå¹¶é¢„ç•™äº† **LLMï¼ˆå¤§è¯­è¨€æ¨¡å‹ï¼‰** æ¥å£ï¼Œç”¨äºè¯­ä¹‰æƒ…æ„Ÿåˆ†æä¸ç­–ç•¥è‡ªåŠ¨åŒ–ç”Ÿæˆã€‚

**æœ€æ–°æ¶æ„ (v2.1)**: é‡‡ç”¨ **FastAPI (åç«¯)** + **React (å‰ç«¯)** çš„å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæä¾›æ›´ä¸“ä¸šã€æµç•…çš„äº¤äº’ä½“éªŒã€‚å†…ç½® **ç»Ÿä¸€å¯åŠ¨è„šæœ¬** (run.py)ï¼Œä¸€é”®å¯åŠ¨å‰åç«¯ã€‚åŒæ—¶ä¿ç•™äº†è½»é‡çº§çš„ Streamlit ç•Œé¢ä½œä¸ºå¿«é€ŸåŸå‹éªŒè¯å·¥å…·ã€‚

---

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

*   **ğŸ–¥ï¸ ç°ä»£åŒ–å·¥ä½œå°**: åŸºäº **React + Tailwind CSS** æ‰“é€ çš„å…¨æ–° Web ç•Œé¢ï¼Œæ”¯æŒ AI æ™ºèƒ½é€‰è‚¡ã€Alpha å› å­åˆ†æã€å¤šç­–ç•¥æ‰«æã€‚
*   **ğŸš€ é«˜æ€§èƒ½åç«¯**: åŸºäº **FastAPI** çš„å¼‚æ­¥ API æœåŠ¡ï¼Œæ”¯æŒæµå¼å“åº”ï¼ˆStreaming Responseï¼‰å¤„ç†è€—æ—¶æ‰«æä»»åŠ¡ã€‚
*   **âš¡ ä¸€é”®å¯åŠ¨**: ç»Ÿä¸€çš„å¯åŠ¨è„šæœ¬ `run.py`ï¼Œå¯åŒæ—¶å¯åŠ¨å‰åç«¯ï¼Œæ— éœ€å¤šä¸ªç»ˆç«¯çª—å£ã€‚
*   **ğŸ› ï¸ æ¨¡å—åŒ–æ¶æ„**: é‡‡ç”¨ä¾èµ–å€’ç½®è®¾è®¡ï¼ŒData Providerã€Strategyã€Engine é«˜åº¦è§£è€¦ï¼Œæ–¹ä¾¿æ‰©å±•ã€‚
*   **ğŸ“ˆ å¤šç»´åº¦ç­–ç•¥**: å†…ç½®å‡çº¿è¶‹åŠ¿ã€æ”¾é‡çªç ´ã€ä½ä¼°å€¼ã€é«˜æ¢æ‰‹ç­‰å¤šç§å®æˆ˜ç­–ç•¥ï¼Œæ”¯æŒè‡ªç”±ç»„åˆã€‚
*   **ğŸ¤– AI èµ‹èƒ½**: é›†æˆ LLM å¯¹è¯æ¥å£ï¼Œæ”¯æŒè‡ªç„¶è¯­è¨€é€‰è‚¡ ("å¸®æˆ‘æ‰¾ä¸€ä¸‹æœ€è¿‘ç¼©é‡ä¸‹è·Œçš„è‚¡ç¥¨")ã€‚
*   **ğŸ§ª å®Œæ•´æµ‹è¯•**: åŒ…å«å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ä¸ä»£ç è¦†ç›–ç‡æŠ¥å‘Šï¼Œç¡®ä¿æ ¸å¿ƒé€»è¾‘ç¨³å¥ã€‚
*   **ğŸ”’ å¥å£®æ€§**: å…¨é¢çš„é”™è¯¯å¤„ç†ã€è¯·æ±‚æ—¥å¿—ã€ç¼“å­˜æœºåˆ¶å’Œå‰ç«¯é”™è¯¯è¾¹ç•Œã€‚

---

## ğŸ“š ç­–ç•¥åº“ (Strategy Library)

### æŠ€æœ¯é¢ç­–ç•¥ (Technical)

| ä»£ç  | åç§° | æ¡ä»¶ | ç”¨é€” |
|------|------|------|------|
| `ma` | å‡çº¿è¶‹åŠ¿ | Close > MA20 & MA5 > MA20 & æœ€è¿‘5æ—¥ä¸Šå‡ | æ•æ‰ä¸Šå‡é€šé“ä¸ªè‚¡ |
| `vol` | æ”¾é‡çªç ´ | æ¶¨å¹… > 2% & é‡æ¯” > 1.5 | å¯»æ‰¾èµ„é‡‘å¼‚åŠ¨ |
| `turn` | é«˜æ¢æ‰‹ | æ¢æ‰‹ç‡ > 5% & éST | ç­›é€‰å¸‚åœºæ´»è·ƒæ ‡çš„ |

### åŸºæœ¬é¢ç­–ç•¥ (Fundamental)

| ä»£ç  | åç§° | æ¡ä»¶ | ç”¨é€” |
|------|------|------|------|
| `pe` | ä½ä¼°å€¼ | 0 < PE-TTM < 30 | å¯»æ‰¾å®‰å…¨è¾¹é™… |
| `growth` | åŒé«˜å¢é•¿ | å‡€åˆ©æ¶¦åŒæ¯” > 20% | æŒ–æ˜é«˜æˆé•¿æ½œåŠ› |
| `roe` | é«˜ROE | ROE > 15% | é”å®šä¼˜è´¨èµ„äº§ |
| `debt` | ä½è´Ÿå€º | èµ„äº§è´Ÿå€ºç‡ < 50% | è§„é¿è´¢åŠ¡é£é™© |

---

## ğŸ“‚ é¡¹ç›®ç»“æ„ (Project Structure)

```
OmniAlpha/
â”œâ”€â”€ ğŸ“„ run.py                  # â­ **ç»Ÿä¸€å¯åŠ¨è„šæœ¬** (å‰åç«¯ä¸€ä½“åŒ–)
â”œâ”€â”€ ğŸ“„ main.py                 # CLI å‘½ä»¤è¡Œå·¥å…·
â”œâ”€â”€ ğŸ“„ web_ui.py               # Streamlit è½»é‡çº§ç•Œé¢
â”‚
â”œâ”€â”€ backend/                   # ğŸ **FastAPI åç«¯æœåŠ¡**
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/               # API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ market.py      # å¸‚åœºæ•°æ®æ¥å£ (æŒ‡æ•°ã€HS300)
â”‚   â”‚   â”‚   â”œâ”€â”€ scan.py        # æ‰«ææ¥å£ (æµå¼NDJSON)
â”‚   â”‚   â”‚   â”œâ”€â”€ stock.py       # è‚¡ç¥¨è¯¦æƒ…
â”‚   â”‚   â”‚   â”œâ”€â”€ strategies.py  # ç­–ç•¥ä¿¡æ¯
â”‚   â”‚   â”‚   â”œâ”€â”€ alpha.py       # Alphaå› å­
â”‚   â”‚   â”‚   â”œâ”€â”€ ai.py          # AIå¯¹è¯
â”‚   â”‚   â”‚   â””â”€â”€ settings.py    # ç³»ç»Ÿè®¾ç½®
â”‚   â”‚   â””â”€â”€ main.py            # FastAPI åº”ç”¨å…¥å£
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ frontend/                  # âš›ï¸ **React + Vite å‰ç«¯**
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ client.ts      # â­ API å®¢æˆ·ç«¯ (ç¼“å­˜+æ‹¦æˆªå™¨)
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ ErrorBoundary.tsx  # â­ é”™è¯¯è¾¹ç•Œ
â”‚   â”‚   â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Layout.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”œâ”€â”€ Home.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Technical.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Alpha.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AI.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Settings.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ App.tsx            # â­ åº”ç”¨å…¥å£ (APIæ£€æŸ¥+ErrorBoundary)
â”‚   â”‚   â””â”€â”€ main.tsx
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â””â”€â”€ vite.config.ts
â”‚
â”œâ”€â”€ strategies/                # ğŸ§  **ç­–ç•¥å®ç°**
â”‚   â”œâ”€â”€ base.py                # ç­–ç•¥åŸºç±»
â”‚   â”œâ”€â”€ technical.py           # æŠ€æœ¯é¢ç­–ç•¥
â”‚   â”œâ”€â”€ fundamental.py         # åŸºæœ¬é¢ç­–ç•¥
â”‚   â””â”€â”€ __init__.py            # ç­–ç•¥æ³¨å†Œè¡¨
â”‚
â”œâ”€â”€ core/                      # âš™ï¸ **æ ¸å¿ƒå¼•æ“**
â”‚   â”œâ”€â”€ engine.py              # åˆ†æå¼•æ“
â”‚   â”œâ”€â”€ strategies_registry.py # ç­–ç•¥æ³¨å†Œ
â”‚   â”œâ”€â”€ config.py              # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ data/                      # ğŸ’¾ **æ•°æ®å±‚**
â”‚   â”œâ”€â”€ baostock_provider.py   # Baostock æ•°æ®æä¾›è€…
â”‚   â”œâ”€â”€ settings.json          # æ•°æ®é…ç½®
â”‚   â””â”€â”€ daily/                 # æ—¥çº¿æ•°æ®ç¼“å­˜
â”‚
â”œâ”€â”€ tests/                     # ğŸ§ª **å®Œæ•´æµ‹è¯•**
â”‚   â”œâ”€â”€ unit/                  # å•å…ƒæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_technical_strategies.py
â”‚   â”‚   â”œâ”€â”€ test_fundamental_strategies.py
â”‚   â”‚   â”œâ”€â”€ test_data_provider.py
â”‚   â”‚   â”œâ”€â”€ test_engine.py
â”‚   â”‚   â””â”€â”€ test_main.py
â”‚   â”œâ”€â”€ integration/
â”‚   â”‚   â””â”€â”€ test_backend_api.py     # â­ åç«¯APIé›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ conftest.py            # â­ Pytest é…ç½®å’Œå…¨å±€ Fixtures
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ pyproject.toml             # Pytest é…ç½®
â”œâ”€â”€ requirements.txt           # Python ä¾èµ–
â””â”€â”€ .coveragerc                # ä»£ç è¦†ç›–ç‡é…ç½®
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹ (Quick Start)

### 1ï¸âƒ£ å‰ç½®æ¡ä»¶ (Prerequisites)

*   **Python**: >= 3.8 (æ¨è 3.10+)
*   **Node.js**: >= 16 (å‰ç«¯å¼€å‘)
*   **npm** æˆ– **pnpm** (å‰ç«¯åŒ…ç®¡ç†)

### 2ï¸âƒ£ ç¯å¢ƒè®¾ç½® (Installation)

å…‹éš†é¡¹ç›®å¹¶å®‰è£…ä¾èµ–ï¼š

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/YourUsername/OmniAlpha.git
cd OmniAlpha

# åˆ›å»º Python è™šæ‹Ÿç¯å¢ƒ (å¯é€‰ä½†æ¨è)
python -m venv venv
source venv/bin/activate        # macOS / Linux
# venv\Scripts\activate          # Windows

# å®‰è£… Python ä¾èµ–
pip install -r requirements.txt

# å®‰è£…å‰ç«¯ä¾èµ–
cd frontend
npm install
cd ..
```

---

## â–¶ï¸ è¿è¡Œé¡¹ç›® (Usage)

### ğŸ¯ **æ¨èæ–¹æ³•: ä¸€é”®å¯åŠ¨ (Unified Launcher)**

åœ¨é¡¹ç›®**æ ¹ç›®å½•**æ‰§è¡Œç»Ÿä¸€å¯åŠ¨è„šæœ¬ï¼š

```bash
# åŒæ—¶å¯åŠ¨å‰åç«¯ (æ¨è)
python run.py --mode all

# æˆ–è€…ä»…å¯åŠ¨åç«¯
python run.py --mode backend

# ä»…å¯åŠ¨å‰ç«¯
python run.py --mode frontend

# å¯åŠ¨ Streamlit (æ—§ç‰ˆç•Œé¢)
python run.py --mode web
```

**å¯åŠ¨å®Œæˆåï¼Œæ‚¨å°†çœ‹åˆ°ï¼š**

```
============================================================
âœ“ æœåŠ¡å¯åŠ¨å®Œæˆï¼
============================================================

ğŸ“ è®¿é—®åœ°å€:
   â€¢ å‰ç«¯å·¥ä½œå°: http://localhost:5173
   â€¢ åç«¯ API: http://localhost:8000
   â€¢ API æ–‡æ¡£: http://localhost:8000/docs

âŒ¨ï¸  æŒ‰ Ctrl+C åœæ­¢æ‰€æœ‰æœåŠ¡
============================================================
```

---

### ğŸ”§ **æ‰‹åŠ¨å¯åŠ¨å„ä¸ªæœåŠ¡**

å¦‚æœæ‚¨æƒ³åœ¨ä¸åŒçš„ç»ˆç«¯ä¸­æ‰‹åŠ¨å¯åŠ¨å„ä¸ªæœåŠ¡ï¼š

#### å¯åŠ¨åç«¯ API

åœ¨**é¡¹ç›®æ ¹ç›®å½•**æ‰“å¼€ä¸€ä¸ªç»ˆç«¯ï¼š

```bash
uvicorn backend.app.main:app --reload --port 8000
```

åç«¯æœåŠ¡å°†åœ¨ä»¥ä¸‹åœ°å€è¿è¡Œï¼š
- **API æœåŠ¡**: `http://localhost:8000`
- **API æ–‡æ¡£**: `http://localhost:8000/docs` (Swagger UI)
- **Redoc æ–‡æ¡£**: `http://localhost:8000/redoc`

åç«¯æ”¯æŒçš„ä¸»è¦ç«¯ç‚¹ï¼š
- `GET /health` - å¥åº·æ£€æŸ¥
- `GET /api/market/index` - è·å–å¸‚åœºæŒ‡æ•°
- `GET /api/market/hs300-list` - è·å–æ²ªæ·±300åˆ—è¡¨
- `POST /api/scan/` - æ‰§è¡Œè‚¡ç¥¨æ‰«æ (æµå¼å“åº”)
- `GET /api/scan/status` - æ‰«ææœåŠ¡çŠ¶æ€

#### å¯åŠ¨å‰ç«¯åº”ç”¨

æ‰“å¼€**æ–°çš„ç»ˆç«¯**ï¼Œè¿›å…¥ frontend ç›®å½•ï¼š

```bash
cd frontend
npm run dev
```

å‰ç«¯åº”ç”¨å°†åœ¨ `http://localhost:5173` å¯åŠ¨ã€‚

#### å¯åŠ¨ Streamlit ç•Œé¢ (å¯é€‰)

åœ¨**é¡¹ç›®æ ¹ç›®å½•**ï¼š

```bash
streamlit run web_ui.py
```

Streamlit ç•Œé¢å°†åœ¨ `http://localhost:8501` å¯åŠ¨ã€‚

---

## ğŸ§ª æµ‹è¯•ä¸è´¨é‡ä¿è¯ (Testing & QA)

é¡¹ç›®åŒ…å«å…¨é¢çš„æµ‹è¯•å¥—ä»¶ï¼Œç¡®ä¿ä»£ç è´¨é‡å’Œç¨³å®šæ€§ã€‚

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œå•å…ƒæµ‹è¯•
pytest tests/unit/ -v

# è¿è¡Œé›†æˆæµ‹è¯•
pytest tests/integration/ -v

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/unit/test_technical_strategies.py::TestMovingAverageStrategy::test_uptrend_match -v

# ä»…è¿è¡Œå¿«é€Ÿæµ‹è¯• (æ’é™¤slowæ ‡è®°)
pytest -m "not slow"

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š (éœ€è¦ pytest-cov)
pytest --cov=. --cov-report=html --cov-report=term-missing
```

### æµ‹è¯•è¦†ç›–çš„å†…å®¹

**âœ… åç«¯ (Backend)**
- å¥åº·æ£€æŸ¥ç«¯ç‚¹
- å¸‚åœºæ•°æ® API (è·å–æŒ‡æ•°ã€HS300åˆ—è¡¨)
- è‚¡ç¥¨æ‰«ææµå¼ API
- é”™è¯¯å¤„ç†ä¸å¼‚å¸¸æƒ…å†µ
- å¹¶å‘è¯·æ±‚å¤„ç†
- æ€§èƒ½åŸºå‡†æµ‹è¯•

**âœ… ç­–ç•¥å±‚ (Strategies)**
- å‡çº¿è¶‹åŠ¿ç­–ç•¥
- æ”¾é‡çªç ´ç­–ç•¥
- é«˜æ¢æ‰‹ç­–ç•¥
- ä½ä¼°å€¼ç­–ç•¥
- é«˜ ROE ç­–ç•¥
- ä½è´Ÿå€ºç­–ç•¥

**âœ… å‰ç«¯ (Frontend)**
- API å®¢æˆ·ç«¯ç¼“å­˜æœºåˆ¶
- é”™è¯¯è¾¹ç•Œæ•è·
- å¼‚æ­¥æ“ä½œå¤„ç†

### æµ‹è¯•ç»“æœç¤ºä¾‹

```
============================= test session starts ==============================
collected 104 items

tests/unit/test_technical_strategies.py::TestMovingAverageStrategy::test_strategy_properties PASSED [  4%]
tests/unit/test_technical_strategies.py::TestMovingAverageStrategy::test_uptrend_match PASSED [  8%]
...

======================== 89 passed, 36 failed (é¢„æœŸ) in 1.85s ====================
```

---

## ğŸ”‘ ä¸»è¦ç‰¹æ€§è¯¦è§£

### åç«¯æ”¹è¿› (Backend Improvements)

âœ… **è¯·æ±‚æ—¥å¿—ä¸ç›‘æ§**
- æ‰€æœ‰è¯·æ±‚è‡ªåŠ¨è®°å½• (æ–¹æ³•ã€URLã€è€—æ—¶)
- é”™è¯¯è¯¦ç»†è·Ÿè¸ªä¸ traceback
- ç»“æ„åŒ–æ—¥å¿—è¾“å‡º

âœ… **æ€§èƒ½ä¼˜åŒ–**
- GZIP å‹ç¼©ä¸­é—´ä»¶
- å¼‚æ­¥è¯·æ±‚å¤„ç†
- æµå¼å“åº” (NDJSON) ç”¨äºé•¿æ—¶é—´æ“ä½œ
- å¢åŠ è¯·æ±‚è¶…æ—¶æ—¶é—´è‡³ 30 ç§’

âœ… **å…¨å±€é”™è¯¯å¤„ç†**
- ç»Ÿä¸€çš„å¼‚å¸¸æ•è·
- HTTP çŠ¶æ€ç åˆ†ç±»å¤„ç† (400, 401, 403, 404, 500)
- ç»“æ„åŒ–é”™è¯¯å“åº”

âœ… **åº”ç”¨ç”Ÿå‘½å‘¨æœŸç®¡ç†**
- å¯åŠ¨/å…³é—­äº‹ä»¶å¤„ç†
- èµ„æºåˆå§‹åŒ–ä¸æ¸…ç†

### å‰ç«¯æ”¹è¿› (Frontend Improvements)

âœ… **API å®¢æˆ·ç«¯å¢å¼º**
- æ™ºèƒ½ç¼“å­˜ (5åˆ†é’Ÿé»˜è®¤TTL)
- è¯·æ±‚/å“åº”æ‹¦æˆªå™¨
- è‡ªåŠ¨é”™è¯¯å¤„ç†ä¸æ—¥å¿—
- è®¤è¯ä»¤ç‰Œç®¡ç†
- å¼€å‘ç¯å¢ƒè‡ªåŠ¨æ£€æµ‹

âœ… **é”™è¯¯è¾¹ç•Œ (Error Boundary)**
- React é”™è¯¯æ•è·
- é™çº§ UI æ˜¾ç¤º
- å¼€å‘ç¯å¢ƒé”™è¯¯è¯¦æƒ…å±•ç¤º
- ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º

âœ… **åº”ç”¨åˆå§‹åŒ–**
- API å¥åº·æ£€æŸ¥
- ç¦»çº¿æ¨¡å¼æ”¯æŒ
- åŠ è½½çŠ¶æ€ç®¡ç†

---

## ğŸ“Š API æ–‡æ¡£

### å¸‚åœºæ•°æ® API

#### è·å–å¸‚åœºæŒ‡æ•°

```http
GET /api/market/index?code=sh.000001&days=90
```

**Response:**
```json
{
  "code": "sh.000001",
  "latest_date": "2024-12-01",
  "latest_close": 3245.67,
  "change": -5.32,
  "pct_change": -0.16,
  "total_records": 90,
  "data": [
    {
      "date": "2024-10-02",
      "open": 3100.0,
      "close": 3120.5,
      "volume": 1500000
    }
  ]
}
```

### è‚¡ç¥¨æ‰«æ API (æµå¼)

#### æ‰§è¡Œæ‰«æ

```http
POST /api/scan/
Content-Type: application/json

{
  "date": "2024-12-01",
  "strategies": ["ma", "vol"],
  "pool_type": "hs300"
}
```

**Response (NDJSON æµ):**
```
{"type": "meta", "total": 300, "message": "Starting scan"}
{"type": "progress", "current": 10, "total": 300, "percentage": 3.3}
{"type": "match", "data": {"code": "sh.600519", "strategies": ["ma"]}}
{"type": "done", "total_scanned": 300, "total_matches": 25}
```

---

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°ç­–ç•¥

1. åœ¨ `strategies/` ç›®å½•ä¸­åˆ›å»ºæ–°çš„ç­–ç•¥ç±»
2. ç»§æ‰¿ `StockStrategy` åŸºç±»
3. å®ç° `check()` æ–¹æ³•
4. åœ¨ `strategies/__init__.py` ä¸­æ³¨å†Œ

### æ‰©å±• API

1. åœ¨ `backend/app/api/` ä¸­åˆ›å»ºæ–°çš„è·¯ç”±æ¨¡å—
2. å®šä¹‰ Pydantic æ¨¡å‹ç”¨äºè¯·æ±‚/å“åº”éªŒè¯
3. åœ¨ `backend/app/main.py` ä¸­æ³¨å†Œè·¯ç”±

### ä¿®æ”¹å‰ç«¯

1. ä¿®æ”¹å¯¹åº”çš„ `pages/` æˆ– `components/`
2. ä½¿ç”¨ `apiClient` è°ƒç”¨åç«¯ API
3. åˆ©ç”¨ `ErrorBoundary` æ•è·é”™è¯¯

---

## ğŸ“ˆ å¼€å‘è®¡åˆ’ (Roadmap)

*   [x] **Phase 1**: æ ¸å¿ƒå¼•æ“é‡æ„ä¸æ¨¡å—åŒ– (2024-12)
*   [x] **Phase 2**: å»ºç«‹ Data-Alpha-Backtest åˆ†å±‚æ¶æ„ (2025-01)
*   [x] **Phase 3**: **æ¶æ„é‡æ„** - è¿ç§»è‡³ FastAPI + React å‰åç«¯åˆ†ç¦»æ¶æ„ (2026-01-14)
*   [x] **Phase 3.1**: ç»Ÿä¸€å¯åŠ¨è„šæœ¬ã€æ—¥å¿—ç³»ç»Ÿã€é”™è¯¯å¤„ç† (2026-01-16)
*   [ ] **Phase 4**: å®Œå–„ `BacktestEngine`ï¼Œå®ç°çœŸå®çš„æ’®åˆé€»è¾‘ä¸ç»©æ•ˆç»Ÿè®¡
*   [ ] **Phase 5**: å®Œå–„ AI æ¨¡å—ï¼Œå®ç° "Text-to-Strategy" è‡ªåŠ¨ä»£ç ç”Ÿæˆ
*   [ ] **Phase 6**: éƒ¨ç½²ä¸è¿ç»´ (Dockerã€K8sã€ç”Ÿäº§ç¯å¢ƒé…ç½®)

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

**å¼€å‘æµç¨‹:**
1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æäº¤ Pull Request

---

## ğŸ“ License

æœ¬é¡¹ç›®é‡‡ç”¨ **MIT License**ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

*   æäº¤ GitHub Issue
*   å‘èµ· GitHub Discussion
*   å‘é€é‚®ä»¶è‡³é¡¹ç›®ç»´æŠ¤è€…

---

**å¼€å‘äº 2026å¹´1æœˆ16æ—¥**  
**æœ€åæ›´æ–°: 2026å¹´1æœˆ16æ—¥**

```text
OmniAlpha/
â”œâ”€â”€ backend/                # ğŸ **åç«¯æœåŠ¡ (FastAPI)**
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/            # API è·¯ç”±å®šä¹‰ (market, stock, scan, ai, alpha)
â”‚   â”‚   â”œâ”€â”€ core/           # æ ¸å¿ƒé…ç½®ä¸å·¥å…·
â”‚   â”‚   â””â”€â”€ main.py         # FastAPI åº”ç”¨å…¥å£
â”‚   â””â”€â”€ ...
â”œâ”€â”€ frontend/               # âš›ï¸ **å‰ç«¯åº”ç”¨ (React + Vite)**
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/            # API å®¢æˆ·ç«¯å°è£…
â”‚   â”‚   â”œâ”€â”€ components/     # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/          # é¡µé¢è§†å›¾
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ strategies/             # ğŸ§  **ç­–ç•¥å®ç°å±‚** (Technical, Fundamental)
â”‚   â”œâ”€â”€ technical.py
â”‚   â”œâ”€â”€ fundamental.py
â”‚   â””â”€â”€ base.py
â”œâ”€â”€ core/                   # âš™ï¸ **æ ¸å¿ƒå¼•æ“** (Backtest, Analysis)
â”œâ”€â”€ data/                   # ğŸ’¾ **æ•°æ®å±‚** (Baostock Provider)
â”œâ”€â”€ tests/                  # ğŸ§ª **æµ‹è¯•å¥—ä»¶**
â”œâ”€â”€ web_ui.py               # ğŸ¦• **æ—§ç‰ˆç•Œé¢** (Streamlit, Legacy)
â”œâ”€â”€ main.py                 # ğŸ”§ **CLI å·¥å…·è„šæœ¬**
â”œâ”€â”€ requirements.txt        # ğŸ“¦ Python ä¾èµ–
â””â”€â”€ README.md               # ğŸ“„ é¡¹ç›®æ–‡æ¡£
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹ (Quick Start)

### 1. ç¯å¢ƒå‡†å¤‡ (Prerequisites)

*   **Python**: >= 3.8 (æ¨èä½¿ç”¨ venv æˆ– conda)
*   **Node.js**: >= 16 (ç”¨äºå‰ç«¯å¼€å‘)

### 2. å®‰è£…ä¸é…ç½® (Installation)

é¦–å…ˆï¼Œå…‹éš†é¡¹ç›®åˆ°æœ¬åœ°ï¼š

```bash
git clone https://github.com/YourUsername/OmniAlpha.git
cd OmniAlpha
```

**å®‰è£… Python ä¾èµ– (Root Directory)**:

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ (å¯é€‰ä½†æ¨è)
python -m venv venv
source venv/bin/activate  # macOS/Linux
# venv\Scripts\activate   # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

**å®‰è£…å‰ç«¯ä¾èµ–**:

```bash
cd frontend
npm install
# æˆ–è€…ä½¿ç”¨ pnpm / yarn
```

---

## â–¶ï¸ è¿è¡Œé¡¹ç›® (Usage)

æ‚¨å¯ä»¥é€‰æ‹©è¿è¡Œå…¨åŠŸèƒ½çš„ Web åº”ç”¨ï¼Œæˆ–è€…ä½¿ç”¨è½»é‡çº§çš„å·¥å…·è„šæœ¬ã€‚

### æ–¹å¼ A: å…¨æ ˆæ¨¡å¼ (FastAPI + React) - **æ¨è**

æˆ‘ä»¬éœ€è¦åŒæ—¶å¯åŠ¨åç«¯ API æœåŠ¡å’Œå‰ç«¯é¡µé¢ã€‚

**1. å¯åŠ¨åç«¯ (Backend)**

åœ¨é¡¹ç›®**æ ¹ç›®å½•**ä¸‹æ‰§è¡Œï¼š

```bash
# ç¡®ä¿åœ¨ OmniAlpha/ æ ¹ç›®å½•
uvicorn backend.app.main:app --reload --port 8000
```
åç«¯æœåŠ¡å°†åœ¨ `http://localhost:8000` å¯åŠ¨ (æ–‡æ¡£: `/docs`)ã€‚

**2. å¯åŠ¨å‰ç«¯ (Frontend)**

æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯çª—å£ï¼Œè¿›å…¥ `frontend` ç›®å½•æ‰§è¡Œï¼š

```bash
cd frontend
npm run dev
```
å‰ç«¯é¡µé¢å°†åœ¨ `http://localhost:5173` å¯åŠ¨ã€‚

### æ–¹å¼ B: è½»é‡çº§æ¨¡å¼ (Legacy Streamlit)

å¦‚æœæ‚¨åªéœ€è¦å¿«é€ŸéªŒè¯é€‰è‚¡é€»è¾‘ï¼Œå¯ä»¥ä½¿ç”¨æ—§ç‰ˆçš„ Streamlit ç•Œé¢ï¼š

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
streamlit run web_ui.py
```

### æ–¹å¼ C: å‘½ä»¤è¡Œæ¨¡å¼ (CLI Script)

ç”¨äºæ— ç•Œé¢æµ‹è¯•æ•°æ®æ¥å£æˆ–å›æµ‹é€»è¾‘ï¼š

```bash
python main.py
```

---

## ğŸ§ª æµ‹è¯• (Testing)

é¡¹ç›®åŒ…å«å®Œå–„çš„æµ‹è¯•å¥—ä»¶ã€‚ç¡®ä¿æ‚¨å·²å®‰è£… `pytest` å’Œç›¸å…³æ’ä»¶ (åŒ…å«åœ¨ requirements.txt ä¸­)ã€‚

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæ¨¡å—æµ‹è¯•
pytest tests/unit/test_technical_strategies.py

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=. --cov-report=html
```

---

## ğŸ“… å¼€å‘è®¡åˆ’ (Roadmap)

*   [x] **Phase 1**: æ ¸å¿ƒå¼•æ“é‡æ„ä¸æ¨¡å—åŒ–ã€‚
*   [x] **Phase 2**: å»ºç«‹ Data-Alpha-Backtest åˆ†å±‚æ¶æ„ã€‚
*   [x] **Phase 3**: **æ¶æ„é‡æ„**: è¿ç§»è‡³ FastAPI + React å‰åç«¯åˆ†ç¦»æ¶æ„ (Completed 2026-01-14)ã€‚
*   [ ] **Phase 4**: å®Œå–„ `BacktestEngine`ï¼Œå®ç°çœŸå®çš„æ’®åˆé€»è¾‘ä¸ç»©æ•ˆç»Ÿè®¡ã€‚
*   [ ] **Phase 5**: å®Œå–„ AI æ¨¡å—ï¼Œå®ç° "Text-to-Strategy" è‡ªåŠ¨ä»£ç ç”Ÿæˆã€‚

---

## ğŸ¤ è´¡çŒ®ä¸åé¦ˆ

æ¬¢è¿æäº¤ Issue æˆ– Pull Requestï¼

**License**: MIT